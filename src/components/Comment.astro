<script>
  let theme = document.firstElementChild?.getAttribute("data-theme");
  let giscusTheme = theme === "dark" ? "noborder_gray" : "light";
  let giscusAttributes = {
    src: "https://giscus.app/client.js",
    "data-repo": "MaxtuneLee/maxtune-blog",
    "data-repo-id": "R_kgDOLJBxxQ",
    "data-category": "Ideas",
    "data-category-id": "DIC_kwDOLJBxxc4CjrTQ",
    "data-mapping": "og:title",
    "data-strict": "0",
    "data-reactions-enabled": "1",
    "data-emit-metadata": "0",
    "data-input-position": "top",
    "data-theme": giscusTheme || "preferred_color_scheme",
    "data-lang": "zh-CN",
    "data-loading": "lazy",
    crossorigin: "anonymous",
    async: "",
  };

  let giscusScript = document.createElement("script");
  Object.entries(giscusAttributes).forEach(([key, value]) =>
    giscusScript.setAttribute(key, value)
  );
  document.getElementById("post-comment")?.appendChild(giscusScript);
</script>
